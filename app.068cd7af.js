parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"RzZT":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e.PLAYER_1="PLAYER_1",e.PLAYER_2="PLAYER_2",e.NO_PLAYER="NO_PLAYER"}(e=exports.Player||(exports.Player={})),exports.nextPlayer=function(r){return r===e.PLAYER_1?e.PLAYER_2:e.PLAYER_1};
},{}],"We/a":[function(require,module,exports) {
"use strict";function r(r,o){return{row:r,col:o}}function o(r,o){return r.row==o.row&&r.col==o.col}function e(r){return(r.row<<10)+r.col}function t(o){var e=o%1024;return r(o-e>>10,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coord=r,exports.areCoordsEquals=o,exports.hash=e,exports.fromHash=t;
},{}],"gKya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Player"),r=require("./NineMensMorrisGame"),n=require("./Coordinate");exports.initHandQueue=function(){for(var n=[],i=[e.Player.PLAYER_1,e.Player.PLAYER_2],o=0;o<2*r.NineMensMorrisGame.NUMBER_OF_POINTS;o++)n.push(i[o%i.length]);return n},exports.initBoard=function(){for(var i=[[1,4,7],[2,4,6],[3,4,5],[1,2,3,5,6,7],[3,4,5],[2,4,6],[1,4,7]],o=new Map,t=function(r){i[r-1].forEach(function(i){o.set(n.hash(n.coord(r,i)),e.Player.NO_PLAYER)})},a=1;a<=r.NineMensMorrisGame.BOARD_SIZE;a++)t(a);return o};
},{"./Player":"RzZT","./NineMensMorrisGame":"ew6C","./Coordinate":"We/a"}],"QRW6":[function(require,module,exports) {
"use strict";var E;Object.defineProperty(exports,"__esModule",{value:!0}),function(E){E.INITIAL="INITIAL",E.SELECT_POINT_TO_MOVE="SELECT_POINT_TO_MOVE",E.MOVE_SELECTED_POINT="MOVE_SELECTED_POINT",E.MILL="MILL",E.GAME_OVER="GAME_OVER"}(E=exports.GameState||(exports.GameState={}));
},{}],"X+Qk":[function(require,module,exports) {
"use strict";var E;Object.defineProperty(exports,"__esModule",{value:!0}),function(E){E.SUCCESSFUL_MOVE="SUCCESSFUL_MOVE",E.FIRST_MOVE_PART="FIRST_MOVE_PART",E.RESTART_MOVE="RESTART_MOVE",E.CANNOT_MOVE="CANNOT_MOVE",E.MILL="MILL",E.OPPONENT_DESTROYED="OPPONENT_DESTROYED",E.INVALID_MILL_MOVE="INVALID_MILL_MOVE"}(E=exports.GameMoveResult||(exports.GameMoveResult={})),exports.NEXT_PLAYER_RESULTS=[E.SUCCESSFUL_MOVE,E.OPPONENT_DESTROYED],exports.PARTIAL_MOVES=[E.FIRST_MOVE_PART,E.MILL];
},{}],"4Crw":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./Coordinate"),r=require("./GameState"),n=require("./GameMoveResult"),o=function(){function t(a){e(this,t),this.game=a}return a(t,[{key:"makeMove",value:function(e){if(!this.game.isGameOver())return this.game.isMill()?this.makeMillMove(e):this.game.currentState==r.GameState.INITIAL?this.makeInitialMove(e):this.makeMoveInNormalPhase(e)}},{key:"makeInitialMove",value:function(e){return this.game.isNoPlayer(e)?(this.game.addInitialPoint(e),this.game.detectMill(e)?n.GameMoveResult.MILL:(this.game.setNextPlayerMove(),n.GameMoveResult.SUCCESSFUL_MOVE)):n.GameMoveResult.CANNOT_MOVE}},{key:"makeMoveInNormalPhase",value:function(e){return this.game.currentMove?this.makeFinalMovePart(e):this.makeFirstMovePart(e)}},{key:"makeFirstMovePart",value:function(e){var t=this.game.boardService.playerAt(e);return t&&t===this.game.currentPlayer?(this.game.currentMove={point:e,neighbours:this.game.possibleMoves(e),player:this.game.currentPlayer},this.game.setState(r.GameState.MOVE_SELECTED_POINT),n.GameMoveResult.FIRST_MOVE_PART):n.GameMoveResult.CANNOT_MOVE}},{key:"makeFinalMovePart",value:function(e){return this.game.currentMove.neighbours.find(function(t){return i.areCoordsEquals(t,e)})?(this.game.movePoint(this.game.currentMove.point,e),this.game.currentMove=null,this.game.detectMill(e)?n.GameMoveResult.MILL:(this.game.setNextPlayerMove(),n.GameMoveResult.SUCCESSFUL_MOVE)):(this.game.currentMove=null,this.game.setState(r.GameState.SELECT_POINT_TO_MOVE),n.GameMoveResult.RESTART_MOVE)}},{key:"makeMillMove",value:function(e){return this.game.isOpponentPoint(e)?(this.game.removePoint(e),this.game.clearMill(),this.game.setNextPlayerMove(),n.GameMoveResult.OPPONENT_DESTROYED):n.GameMoveResult.INVALID_MILL_MOVE}}]),t}();exports.GameMoveEngine=o;
},{"./Coordinate":"We/a","./GameState":"QRW6","./GameMoveResult":"X+Qk"}],"ew6C":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./Player"),o=require("./Coordinate"),l=n(require("./InitialGameHelper")),u=require("./GameState"),c=require("./GameMoveEngine"),y=3,h=2,v=function(){function i(e,t){r(this,i),this.movesHistory=e,this.boardService=t,this.state=this.resetState(),this.gameMoveEngine=new c.GameMoveEngine(this),this.boardService.resetBoard(this.state.board)}return a(i,[{key:"resetState",value:function(e){var r,i,a=e||{initialHandQueue:l.initHandQueue(),millPlayer:null,gameState:u.GameState.INITIAL,prevState:u.GameState.INITIAL,playerPoints:(r={},t(r,s.Player.PLAYER_1,0),t(r,s.Player.PLAYER_2,0),r),currentPlayerMove:s.Player.PLAYER_1,board:l.initBoard(),history:[],destroyedOpponents:(i={},t(i,s.Player.PLAYER_1,0),t(i,s.Player.PLAYER_2,0),i),currentMove:null};return this.state=this.clone(a),this.boardService.resetBoard(this.state.board),this.movesHistory.resetHistory(this.state.history),a}},{key:"getState",value:function(){return this.clone(this.state)}},{key:"clone",value:function(t){if(null===t||"object"!==e(t))return t;if(t instanceof Map)return new Map(t);var r=t.constructor();for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(t.isActiveClone=null,r[i]=this.clone(t[i]),delete t.isActiveClone);return r}},{key:"addInitialPoint",value:function(e){if(!this.state.initialHandQueue.length)throw Error("Initial hand queue is empty!");var t=this.boardService.playerAt(e),r=t===s.Player.NO_PLAYER?this.state.currentPlayerMove:t;this.boardService.setPlayer(e,r),this.state.playerPoints[this.currentPlayer]++,this.movesHistory.addInitialMove(e,this.currentPlayer)}},{key:"setNextPlayerMove",value:function(){this.state.initialHandQueue.length?(this.state.currentPlayerMove=this.state.initialHandQueue.pop(),this.setState(this.state.initialHandQueue.length?u.GameState.INITIAL:u.GameState.SELECT_POINT_TO_MOVE)):(this.setState(u.GameState.SELECT_POINT_TO_MOVE),this.state.currentPlayerMove=s.nextPlayer(this.state.currentPlayerMove))}},{key:"tryToMakeMove",value:function(e){return this.gameMoveEngine.makeMove(e)}},{key:"movePoint",value:function(e,t){var r=this.boardService.playerAt(e);this.boardService.playerAt(t)===s.Player.NO_PLAYER&&(this.boardService.setPlayer(t,r),this.boardService.setPlayer(e,s.Player.NO_PLAYER),this.movesHistory.addMove({from:e,to:t,player:this.currentPlayer}))}},{key:"detectMill",value:function(e){var t=this.boardService.isCoordinatePartOfMill(e);return this.state.millPlayer=t?this.currentPlayer:null,t&&this.setState(u.GameState.MILL),t}},{key:"isMill",value:function(){return null!==this.state.millPlayer}},{key:"forEachBoardPosition",value:function(e){this.boardService.forEach(e)}},{key:"isGameOver",value:function(){return this.state.gameState===u.GameState.GAME_OVER}},{key:"isNoPlayer",value:function(e){return this.boardService.playerAt(e)===s.Player.NO_PLAYER}},{key:"isOpponentPoint",value:function(e){var t=this.boardService.playerAt(e);return this.isOpponentPosition(t)}},{key:"isOpponentPosition",value:function(e){return e&&e!=s.Player.NO_PLAYER&&e!=this.currentPlayer}},{key:"possibleMoves",value:function(e){var t=this,r=this.movesHistory.getPreviousCoordinate(this.currentPlayer,e);return this.findNeighbours(e).filter(function(e){return t.isNoPlayer(e)}).filter(function(e){return!(r&&o.areCoordsEquals(r,e))})}},{key:"allOpponentPositions",value:function(){var e=this;return this.boardService.filterForCoordinates(function(t){return e.isOpponentPosition(t)})}},{key:"findNeighbours",value:function(e){return this.state.playerPoints[this.currentPlayer]===y?this.boardService.findPlayerCoordinates(s.Player.NO_PLAYER):this.boardService.findNeighbours(e)}},{key:"isFlyingActive",value:function(){return Object.values(this.state.playerPoints).some(function(e){return e===y})}},{key:"setState",value:function(e){this.isGameOver()||(e!==u.GameState.MOVE_SELECTED_POINT&&(this.state.prevState=this.state.gameState),this.state.gameState=e)}},{key:"findSelectableCoordinates",value:function(e){switch(this.currentState){case u.GameState.INITIAL:return this.boardService.findPlayerCoordinates(s.Player.NO_PLAYER);case u.GameState.SELECT_POINT_TO_MOVE:return this.boardService.findPlayerCoordinates(this.currentPlayer);case u.GameState.MILL:return this.allOpponentPositions();case u.GameState.MOVE_SELECTED_POINT:return this.possibleMoves(e);default:return[]}}},{key:"removePoint",value:function(e){var t=this.boardService.playerAt(e);this.state.playerPoints[t]--,this.state.destroyedOpponents[this.currentPlayer]++,this.boardService.setPlayer(e,s.Player.NO_PLAYER),Object.values(this.state.playerPoints).some(function(e){return e===h})&&this.setState(u.GameState.GAME_OVER)}},{key:"clearMill",value:function(){this.setState(this.state.prevState),this.state.millPlayer=null}},{key:"currentState",get:function(){return this.state.gameState}},{key:"currentPlayer",get:function(){return this.state.currentPlayerMove}},{key:"currentMove",set:function(e){this.state.currentMove=e},get:function(){return this.state.currentMove}}]),i}();v.NUMBER_OF_POINTS=9,v.BOARD_SIZE=7,exports.NineMensMorrisGame=v;
},{"./Player":"RzZT","./Coordinate":"We/a","./InitialGameHelper":"gKya","./GameState":"QRW6","./GameMoveEngine":"4Crw"}],"TKrj":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("../game/Coordinate"),r=function(){function t(i,s){e(this,t),this.ctx=i,this.squareSize=s}return i(t,[{key:"setColor",value:function(e){this.ctx.strokeStyle=e,this.ctx.fillStyle=e}},{key:"moveTo",value:function(e){this.ctx.moveTo(this.squareSize*(e.col-1)+this.squareSize/2,this.squareSize*(e.row-1)+this.squareSize/2)}},{key:"lineTo",value:function(e){this.ctx.lineTo(this.squareSize*(e.col-1)+this.squareSize/2,this.squareSize*(e.row-1)+this.squareSize/2)}},{key:"strokeRect",value:function(e,t){var i=this.squareSize*(e.col-1)+this.squareSize/2,s=this.squareSize*(e.row-1)+this.squareSize/2;this.ctx.strokeRect(i,s,this.squareSize*(t.col-1)-i+this.squareSize/2,this.squareSize*(t.row-1)-s+this.squareSize/2)}},{key:"stroke",value:function(){this.ctx.stroke()}},{key:"fillCircle",value:function(e,t){this.drawCircle(e,t),this.ctx.fill()}},{key:"strokeCircle",value:function(e,t){this.drawCircle(e,t),this.ctx.stroke()}},{key:"clearAll",value:function(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.beginPath()}},{key:"getCoordinate",value:function(e){var t=Math.floor(e.y/this.squareSize),i=Math.floor(e.x/this.squareSize);return s.coord(t+1,i+1)}},{key:"drawCircle",value:function(e,t){var i=(e.col-1)*this.squareSize+this.squareSize/2,s=(e.row-1)*this.squareSize+this.squareSize/2;this.ctx.beginPath(),this.ctx.arc(i,s,t,0,2*Math.PI)}}]),t}();exports.GameCanvasContext=r;
},{"../game/Coordinate":"We/a"}],"Itjq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../game/Player"),r=new Map;r.set(e.Player.PLAYER_1,{color:"red",radius:10,label:"Player 1"}),r.set(e.Player.PLAYER_2,{color:"blue",radius:10,label:"Player 2"}),r.set(e.Player.NO_PLAYER,{color:"black",radius:5,label:"No player"}),exports.getPaintablePlayer=function(e){return r.get(e)};
},{"../game/Player":"RzZT"}],"si8q":[function(require,module,exports) {
"use strict";function e(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function a(e,a){for(var t=0;t<a.length;t++){var s=a[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function t(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),e}Object.defineProperty(exports,"__esModule",{value:!0});var s=require("../game/NineMensMorrisGame"),o=require("../game/Coordinate"),i=require("./GameCanvasContext"),n=require("../game/Player"),r=require("../game/GameMoveResult"),l=require("./PaintablePlayer"),c=function(){function a(t,o,r){e(this,a),this.canvas=t,this.game=o,this.afterUpdate=r,this.boardColor="#212121",this.humanPlayers=[n.Player.PLAYER_1],this.fitToContainer(t),this.addMouseListener(t),this.squareSize=t.width/s.NineMensMorrisGame.BOARD_SIZE,this.gameCanvas=new i.GameCanvasContext(t.getContext("2d"),this.squareSize),this.drawInitialCanvas(),this.selectablePoints=this.game.findSelectableCoordinates()}return t(a,[{key:"onMouseClick",value:function(e){var a=this;if(this.humanPlayers.includes(this.game.currentPlayer)){var t=this.game.tryToMakeMove(e);switch(t){case r.GameMoveResult.SUCCESSFUL_MOVE:case r.GameMoveResult.OPPONENT_DESTROYED:this.resetCanvasAndDrawGame(),setTimeout(function(){a.afterUpdate(t,function(){return a.resetCanvasAndDrawGame()})});break;case r.GameMoveResult.FIRST_MOVE_PART:this.drawPossibleMoves(e);break;case r.GameMoveResult.RESTART_MOVE:this.resetCanvasAndDrawGame(),this.onMouseClick(e);break;case r.GameMoveResult.MILL:this.resetCanvasAndDrawGame(),this.drawPossibleMillMoves();break;case r.GameMoveResult.CANNOT_MOVE:}this.selectablePoints=this.game.findSelectableCoordinates(e)}else console.log("NOW IS COMPUTER TURN!")}},{key:"fitToContainer",value:function(e){e.style.width="100%",e.style.height="100%",e.width=e.offsetWidth,e.height=e.offsetHeight}},{key:"drawInitialCanvas",value:function(){this.drawLines(),this.drawDots()}},{key:"drawDots",value:function(){var e=this;this.game.forEachBoardPosition(function(a,t){var s=l.getPaintablePlayer(t);t===n.Player.NO_PLAYER?(e.gameCanvas.setColor(e.boardColor),e.gameCanvas.fillCircle(a,s.radius)):(e.gameCanvas.setColor(s.color),e.gameCanvas.fillCircle(a,s.radius))})}},{key:"drawPossibleMoves",value:function(e){var a=this;this.game.possibleMoves(e).forEach(function(e){a.gameCanvas.strokeCircle(e,15)})}},{key:"drawPossibleMillMoves",value:function(){var e=this;this.game.allOpponentPositions().forEach(function(a){e.gameCanvas.strokeCircle(a,15)})}},{key:"resetCanvasAndDrawGame",value:function(){this.gameCanvas.clearAll(),this.drawInitialCanvas()}},{key:"drawLines",value:function(){this.gameCanvas.setColor(this.boardColor),this.gameCanvas.strokeRect(o.coord(1,1),o.coord(7,7)),this.gameCanvas.strokeRect(o.coord(2,2),o.coord(6,6)),this.gameCanvas.strokeRect(o.coord(3,3),o.coord(5,5)),this.gameCanvas.moveTo(o.coord(1,4)),this.gameCanvas.lineTo(o.coord(3,4)),this.gameCanvas.moveTo(o.coord(5,4)),this.gameCanvas.lineTo(o.coord(7,4)),this.gameCanvas.moveTo(o.coord(4,1)),this.gameCanvas.lineTo(o.coord(4,3)),this.gameCanvas.moveTo(o.coord(4,5)),this.gameCanvas.lineTo(o.coord(4,7)),this.gameCanvas.stroke()}},{key:"addMouseListener",value:function(e){var a=this;function t(e,a){var t=e.getBoundingClientRect();return{x:a.clientX-t.left,y:a.clientY-t.top}}e.addEventListener("click",function(s){var o=t(e,s),i=a.gameCanvas.getCoordinate(o);a.onMouseClick(i)}),e.addEventListener("mousemove",function(s){var i=t(e,s),n=a.gameCanvas.getCoordinate(i),r=a.selectablePoints.some(function(e){return o.areCoordsEquals(e,n)});e.style.cursor=r?"pointer":"default"})}}]),a}();exports.GameDrawer=c;
},{"../game/NineMensMorrisGame":"ew6C","../game/Coordinate":"We/a","./GameCanvasContext":"TKrj","../game/Player":"RzZT","../game/GameMoveResult":"X+Qk","./PaintablePlayer":"Itjq"}],"jZTF":[function(require,module,exports) {
"use strict";function e(e,a){return n(e)||r(e,a)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(l){a=!0,i=l}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}function n(e){if(Array.isArray(e))return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var l=require("./PaintablePlayer"),c=require("../game/Player"),s=require("../game/GameState"),y=function(){function t(e){var r,n;i(this,t),this.game=e,this.currentPlayerText=document.getElementById("current-player-text"),this.moveTypeText=document.getElementById("game-state"),this.playerPoints=(a(r={},c.Player.PLAYER_1,document.getElementById("player-1-points")),a(r,c.Player.PLAYER_2,document.getElementById("player-2-points")),r),this.gameStateToText=(a(n={},s.GameState.INITIAL,"Initial"),a(n,s.GameState.MOVE_SELECTED_POINT,"Move coordinate"),a(n,s.GameState.SELECT_POINT_TO_MOVE,"Select coordinate"),a(n,s.GameState.MILL,"Mill"),a(n,s.GameState.GAME_OVER,"The end"),n)}return u(t,[{key:"update",value:function(){this.updateCurrentPlayerText(),this.updateGameState(),this.updateHistoryMoves(),this.updatePoints()}},{key:"updateCurrentPlayerText",value:function(){var e=l.getPaintablePlayer(this.game.currentPlayer);this.currentPlayerText.innerText=e.label,this.currentPlayerText.style.color=e.color}},{key:"updateGameState",value:function(){this.moveTypeText.innerText=this.gameStateToText[this.game.currentState]||"Unknown state"}},{key:"updateHistoryMoves",value:function(){}},{key:"updatePoints",value:function(){var t=this;Object.entries(this.game.getState().playerPoints).forEach(function(r){var n=e(r,2),a=n[0],i=n[1];t.playerPoints[a].innerText=i+""})}}]),t}();exports.GameInfoWriter=y;
},{"./PaintablePlayer":"Itjq","../game/Player":"RzZT","../game/GameState":"QRW6"}],"wTVz":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./Coordinate"),i=function(){function t(){e(this,t),this.history=[]}return r(t,[{key:"addMove",value:function(e){this.history.push(e)}},{key:"getHistory",value:function(){return this.history}},{key:"resetHistory",value:function(e){this.history=e}},{key:"addInitialMove",value:function(e,t){this.addMove({to:e,player:t})}},{key:"getPreviousCoordinate",value:function(e,t){for(var r=this.history.length-1;r>=0;r--)if(this.history[r].player===e)return o.areCoordsEquals(this.history[r].to,t)?this.history[r].from:null;return null}}]),t}();exports.MovesHistory=i;
},{"./Coordinate":"We/a"}],"b51U":[function(require,module,exports) {
"use strict";function o(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function r(o,r){for(var c=0;c<r.length;c++){var d=r[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(o,d.key,d)}}function c(o,c,d){return c&&r(o.prototype,c),d&&r(o,d),o}Object.defineProperty(exports,"__esModule",{value:!0});var d=require("./InitialGameHelper"),h=require("./Coordinate"),a=function(){function r(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.initBoard();o(this,r),this.board=c,this.neighbours=this.initNeighbours(),this.millCheckPositions=this.initMillCheckPositions()}return c(r,[{key:"resetBoard",value:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.initBoard();this.board=o}},{key:"playerAt",value:function(o){return this.board.get(h.hash(o))}},{key:"setPlayer",value:function(o,r){this.board.set(h.hash(o),r)}},{key:"filterForCoordinates",value:function(o){var r=[];return this.forEach(function(c,d){o(d)&&r.push(c)}),r}},{key:"findPlayerCoordinates",value:function(o){return this.filterForCoordinates(function(r){return r===o})}},{key:"isCoordinatePartOfMill",value:function(o){var r=this,c=this.playerAt(o);return this.millCheckPositions.get(h.hash(o)).some(function(o){return o.every(function(o){return r.playerAt(o)===c})})}},{key:"forEach",value:function(o){this.board.forEach(function(r,c){o(h.fromHash(c),r)})}},{key:"findNeighbours",value:function(o){return this.neighbours.get(h.hash(o))}},{key:"initNeighbours",value:function(){return new Map([[h.hash(h.coord(1,1)),[h.coord(1,4),h.coord(4,1)]],[h.hash(h.coord(1,4)),[h.coord(1,1),h.coord(1,7),h.coord(2,4)]],[h.hash(h.coord(1,7)),[h.coord(1,4),h.coord(4,7)]],[h.hash(h.coord(2,2)),[h.coord(2,4),h.coord(4,2)]],[h.hash(h.coord(2,4)),[h.coord(1,4),h.coord(2,6),h.coord(3,4),h.coord(2,2)]],[h.hash(h.coord(2,6)),[h.coord(2,4),h.coord(4,6)]],[h.hash(h.coord(3,3)),[h.coord(3,4),h.coord(4,3)]],[h.hash(h.coord(3,4)),[h.coord(3,3),h.coord(2,4),h.coord(3,5)]],[h.hash(h.coord(3,5)),[h.coord(3,4),h.coord(4,5)]],[h.hash(h.coord(4,1)),[h.coord(1,1),h.coord(4,2),h.coord(7,1)]],[h.hash(h.coord(4,2)),[h.coord(4,1),h.coord(2,2),h.coord(6,2),h.coord(4,3)]],[h.hash(h.coord(4,3)),[h.coord(4,2),h.coord(3,3),h.coord(5,3)]],[h.hash(h.coord(4,5)),[h.coord(3,5),h.coord(5,5),h.coord(4,6)]],[h.hash(h.coord(4,6)),[h.coord(4,5),h.coord(2,6),h.coord(4,7),h.coord(6,6)]],[h.hash(h.coord(4,7)),[h.coord(4,6),h.coord(1,7),h.coord(7,7)]],[h.hash(h.coord(5,3)),[h.coord(4,3),h.coord(5,4)]],[h.hash(h.coord(5,4)),[h.coord(5,3),h.coord(5,5),h.coord(6,4)]],[h.hash(h.coord(5,5)),[h.coord(5,4),h.coord(4,5)]],[h.hash(h.coord(6,2)),[h.coord(4,2),h.coord(6,4)]],[h.hash(h.coord(6,4)),[h.coord(6,2),h.coord(5,4),h.coord(6,6),h.coord(7,4)]],[h.hash(h.coord(6,6)),[h.coord(6,4),h.coord(4,6)]],[h.hash(h.coord(7,1)),[h.coord(4,1),h.coord(7,4)]],[h.hash(h.coord(7,4)),[h.coord(7,1),h.coord(6,4),h.coord(7,7)]],[h.hash(h.coord(7,7)),[h.coord(7,4),h.coord(4,7)]]])}},{key:"initMillCheckPositions",value:function(){return new Map([[h.hash(h.coord(1,1)),[[h.coord(4,1),h.coord(7,1)],[h.coord(1,4),h.coord(1,7)]]],[h.hash(h.coord(1,4)),[[h.coord(2,4),h.coord(3,4)],[h.coord(1,1),h.coord(1,7)]]],[h.hash(h.coord(1,7)),[[h.coord(4,7),h.coord(7,7)],[h.coord(1,1),h.coord(1,4)]]],[h.hash(h.coord(2,2)),[[h.coord(2,4),h.coord(2,6)],[h.coord(4,2),h.coord(6,2)]]],[h.hash(h.coord(2,4)),[[h.coord(1,4),h.coord(3,4)],[h.coord(2,2),h.coord(2,6)]]],[h.hash(h.coord(2,6)),[[h.coord(2,2),h.coord(2,4)],[h.coord(4,6),h.coord(6,6)]]],[h.hash(h.coord(3,3)),[[h.coord(3,4),h.coord(3,5)],[h.coord(4,3),h.coord(5,3)]]],[h.hash(h.coord(3,4)),[[h.coord(1,4),h.coord(2,4)],[h.coord(3,3),h.coord(3,5)]]],[h.hash(h.coord(3,5)),[[h.coord(3,3),h.coord(3,4)],[h.coord(4,5),h.coord(5,5)]]],[h.hash(h.coord(4,1)),[[h.coord(4,2),h.coord(4,3)],[h.coord(1,1),h.coord(7,1)]]],[h.hash(h.coord(4,2)),[[h.coord(2,2),h.coord(6,2)],[h.coord(4,1),h.coord(4,3)]]],[h.hash(h.coord(4,3)),[[h.coord(3,3),h.coord(5,3)],[h.coord(4,1),h.coord(4,2)]]],[h.hash(h.coord(4,5)),[[h.coord(3,5),h.coord(5,5)],[h.coord(4,6),h.coord(4,7)]]],[h.hash(h.coord(4,6)),[[h.coord(2,6),h.coord(6,6)],[h.coord(4,5),h.coord(4,7)]]],[h.hash(h.coord(4,7)),[[h.coord(1,7),h.coord(7,7)],[h.coord(4,5),h.coord(4,6)]]],[h.hash(h.coord(5,3)),[[h.coord(3,3),h.coord(4,3)],[h.coord(5,4),h.coord(5,5)]]],[h.hash(h.coord(5,4)),[[h.coord(5,3),h.coord(5,5)],[h.coord(6,4),h.coord(7,4)]]],[h.hash(h.coord(5,5)),[[h.coord(5,3),h.coord(5,4)],[h.coord(2,6),h.coord(4,6)]]],[h.hash(h.coord(6,2)),[[h.coord(2,2),h.coord(4,2)],[h.coord(6,4),h.coord(6,6)]]],[h.hash(h.coord(6,4)),[[h.coord(6,2),h.coord(6,6)],[h.coord(5,4),h.coord(7,4)]]],[h.hash(h.coord(6,6)),[[h.coord(2,6),h.coord(4,6)],[h.coord(6,2),h.coord(6,4)]]],[h.hash(h.coord(7,1)),[[h.coord(1,1),h.coord(4,1)],[h.coord(7,4),h.coord(7,7)]]],[h.hash(h.coord(7,4)),[[h.coord(7,1),h.coord(7,7)],[h.coord(6,4),h.coord(5,4)]]],[h.hash(h.coord(7,7)),[[h.coord(7,1),h.coord(7,4)],[h.coord(1,7),h.coord(4,7)]]]])}}]),r}();exports.BoardService=a;
},{"./InitialGameHelper":"gKya","./Coordinate":"We/a"}],"xm2Z":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function n(t,r){e(this,n),this.value=t,this.parent=r,this.children=[]}return t(n,[{key:"addChild",value:function(e){e.parent=this,this.children.push(e)}},{key:"getChildren",value:function(){return this.children}},{key:"setChildren",value:function(e){this.children=e}}]),n}();exports.TreeNode=r;var i=function n(t){e(this,n),this.root=new r(t,null)};exports.Tree=i;
},{}],"tt+u":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../game/Player"),i=require("../tree/Tree"),n=require("../game/GameMoveResult"),o=require("../game/GameState"),u=function(){function t(a,r){e(this,t),this.heuristic=a,this.game=r}return a(t,[{key:"buildGameTree",value:function(e){var t=this.game.getState(),a=this.findOptimalDepth(t),r=new i.Tree({evaluation:0,movesToValidState:null});return this.minMax(t,e,e,a,r.root),this.game.resetState(t),r}},{key:"minMax",value:function(e,t,a,i,n){var o=this;if(this.game.resetState(e),0===i||this.game.isGameOver())return this.heuristic.calculateBoard(e,r.Player.PLAYER_2);var u=function(u,l){var s=u;return o.buildNodesToSearch(n).forEach(function(n){o.game.resetState(e),n.value.movesToValidState.forEach(function(e){o.game.tryToMakeMove(e)});var u=o.minMax(o.game.getState(),r.nextPlayer(t),a,i-1,n);n.value.evaluation=u,s=l(s,u)}),s};return t===a?u(-1/0,Math.max):u(1/0,Math.min)}},{key:"buildNodesToSearch",value:function(e){var t=this,a=this.game.getState(),r=[],o=function(t){r.push(new i.TreeNode({movesToValidState:t,evaluation:null},e))};return this.game.findSelectableCoordinates().forEach(function(e){t.game.resetState(a);var r=t.game.tryToMakeMove(e);if(r===n.GameMoveResult.MILL)t.game.findSelectableCoordinates(e).forEach(function(t){o([e,t])});else if(r===n.GameMoveResult.FIRST_MOVE_PART){var i=t.game.findSelectableCoordinates(e),u=t.game.getState();i.forEach(function(a){t.game.resetState(u),t.game.tryToMakeMove(a)===n.GameMoveResult.MILL?t.game.findSelectableCoordinates(a).forEach(function(t){o([e,a,t])}):o([e,a])})}else o([e])}),this.game.resetState(a),e.setChildren(r),r}},{key:"findOptimalDepth",value:function(e){return e.gameState===o.GameState.INITIAL?3:this.game.isFlyingActive()?3:4}}]),t}();exports.MinMaxAlgorithm=u;
},{"../game/Player":"RzZT","../tree/Tree":"xm2Z","../game/GameMoveResult":"X+Qk","../game/GameState":"QRW6"}],"O5Ua":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../game/Player"),o=function(){function n(){e(this,n)}return r(n,[{key:"calculateBoard",value:function(e,n){return e.destroyedOpponents[n]-e.destroyedOpponents[t.nextPlayer(n)]}}]),n}();exports.PlayerRemainingPointsHeuristic=o;
},{"../../game/Player":"RzZT"}],"0/Ws":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./game/NineMensMorrisGame"),r=require("./paint/GameDrawer"),i=require("./paint/GameInfoWriter"),n=require("./game/MovesHistory"),a=require("./game/BoardService"),t=require("./ai/MinMaxAlgorithm"),o=require("./ai/heuristics/PlayerRemainingPointsHeuristic"),u=require("./game/Player"),l=require("./game/GameMoveResult");function s(e,r){var i=e.buildGameTree(u.Player.PLAYER_2);console.log(i.root.getChildren());var n=i.root.getChildren().map(function(e){return e.value.evaluation}).reduce(function(e,r){return e>=r?e:r}),a=i.root.getChildren().map(function(e){return e.value}).filter(function(e){return e.evaluation===n}),t=a[Math.floor(Math.random()*a.length)];console.log(t),t.movesToValidState.forEach(function(e){r.tryToMakeMove(e)})}!function(){console.log("HELLO IN THE NINE MEN'S MORRIS GAME");var u=new e.NineMensMorrisGame(new n.MovesHistory,new a.BoardService),m=document.getElementById("game-canvas"),c=new i.GameInfoWriter(u),M=new t.MinMaxAlgorithm(new o.PlayerRemainingPointsHeuristic,u);new r.GameDrawer(m,u,function(e,r){c.update(),l.NEXT_PLAYER_RESULTS.includes(e)&&setTimeout(function(){s(M,u),c.update(),r()},10)});c.update()}();
},{"./game/NineMensMorrisGame":"ew6C","./paint/GameDrawer":"si8q","./paint/GameInfoWriter":"jZTF","./game/MovesHistory":"wTVz","./game/BoardService":"b51U","./ai/MinMaxAlgorithm":"tt+u","./ai/heuristics/PlayerRemainingPointsHeuristic":"O5Ua","./game/Player":"RzZT","./game/GameMoveResult":"X+Qk"}]},{},["0/Ws"], null)
//# sourceMappingURL=app.068cd7af.js.map